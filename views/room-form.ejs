<!DOCTYPE html>
<html lang="he" dir="rtl">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <%- include('partials/head', { title: '注专转 专' }) %>
        <link rel="stylesheet" href="/style.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    </head>

    <body>
        <%- include('partials/navbar') %>
        <div class="page-banner"></div>

        <div class="container mt-3 pt-3">
            <form id="roomForm" class="p-4 border rounded bg-light">
                <div class="row g-3">
                    <div class="col-md-4">
                        <label for="selectedDate" class="form-label">转专</label>
                        <input type="date" id="selectedDate" class="form-control" required />
                    </div>
                    <div class="col-md-4">
                        <label for="roomNumber" class="form-label">住驻专 专</label>
                        <input type="text" id="roomNumber" class="form-control" required />
                    </div>
                    <div class="col-md-4">
                        <label for="names" class="form-label">驻/转</label>
                        <input type="text" id="names" class="form-control" placeholder="砖 驻/转" />
                    </div>
                    <div class="col-md-4">
                        <label for="startTime" class="form-label">砖注转 转</label>
                        <select id="startTime" class="form-select" required></select>
                    </div>
                    <div class="col-md-4">
                        <label for="endTime" class="form-label">砖注转 住</label>
                        <select id="endTime" class="form-select" required></select>
                    </div>
                    <div class="col-md-4">
                        <label for="selectedColor" class="form-label">爪注</label>
                        <input type="color" id="selectedColor" class="form-control form-control-color"
                            value="#79c2b3" />
                    </div>
                    <div class="col-md-6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="recurringEvent" />
                            <label class="form-check-label" for="recurringEvent">专注 专?</label>
                        </div>
                    </div>
                    <div class="col-md-6" id="recurringOptions" style="visibility:hidden;">
                        <label for="recurringNum" class="form-label"> 砖注转 专</label>
                        <input type="number" id="recurringNum" class="form-control" min="1" max="52" />
                    </div>
                    <div class="col-12 d-flex justify-content-center mt-4">
                        <button type="submit" class="btn btn-success">砖专</button>
                    </div>
                </div>
            </form>
        </div>

        <!-- inject TIMES so script.js can populate the <select> -->
        <script>
            // 1) Rawinject the JSON (no escaping)
            const _timesJson = '<%- JSON.stringify(TIMES) %>';
            // 2) Parse and attach as a true global
            window.TIMES = JSON.parse(_timesJson);

            // sanity check in the console:
            console.log(' window.TIMES =', window.TIMES);
        </script>


        <!-- your usual scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="/script.js"></script>
    </body>

</html>