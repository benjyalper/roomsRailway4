<!DOCTYPE html>
<html lang="he" dir="rtl">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- head partial injects your <title> -->
        <%- include('partials/head', { title: 'טבלת חדרים' }) %>

        <!-- your custom styles -->
        <link rel="stylesheet" href="/style.css" />

        <!-- Bootstrap & FontAwesome -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

        <!-- jQuery-UI CSS for the datepicker -->
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
    </head>

    <body>
        <!-- fixed navbar with page title -->
        <%- include('partials/navbar') %>

        <!-- decorative “sea-tone” banner -->
        <div class="page-banner"></div>

        <div class="container mt-3 pt-3 text-center">
            <!-- date picker only -->
            <div class="mb-3">
                <!-- ← changed to text for jQuery-UI -->
                <input type="text" id="lookupDate" class="form-control" autocomplete="off" />
                <!-- new localized label -->
                <div id="localizedDate" class="text-center mb-3 fst-italic"></div>
            </div>
        </div>




        <% 
      // ─── Define your rooms & times ─────────────────────────────────
      const rooms = ['1','2','3','4','5','6','7','15','מקלט'];
      const TIMES = [
        '07:00','07:30','08:00','08:30','09:00','09:30',
        '10:00','10:30','11:00','11:30','12:00','12:30',
        '13:00','13:30','14:00','14:30','15:00','15:30',
        '16:00','16:30','17:00','17:30','18:00','18:30',
        '19:00','19:30','20:00','20:30','21:00'
      ];
    %>

        <div class="schedule-wrapper">
            <table id="scheduleTable">
                <thead>
                    <tr>
                        <th class="time-col"></th>
                        <% rooms.forEach(label => { %>
                        <th class="room-col"><%= label %></th>
                        <% }) %>
                    </tr>
                </thead>
                <tbody>
                    <% TIMES.forEach(time => { %>
                    <tr>
                        <th class="time-col"><%= time %></th>
                        <% rooms.forEach(label => { %>
                        <td class="grid-cell" data-room-hour="<%= label %> <%= time %>:00"></td>
                        <% }) %>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>

        <!-- core scripts -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

        <!-- jQuery-UI + Hebrew locale for datepicker -->
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-datepicker/1.13.0/i18n/datepicker-he.js"></script>

        <!-- your existing script (initSchedule etc.) -->
        <script src="/script.js"></script>

        <!-- initialize the Hebrew datepicker -->
        <script>
            $(function () {
                $("#lookupDate")
                    .datepicker($.datepicker.regional["he"])         // Hebrew strings
                    .datepicker("option", "dateFormat", "dd.mm.yy")   // e.g. 14.05.2025
                    .datepicker("setDate", new Date())               // default to today
                    .off("change")                                    // remove old handlers
                    .on("change", fetchDataByDate);                  // re-fetch on pick
            });
        </script>
    </body>

</html>